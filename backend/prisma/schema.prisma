generator client {
    provider = "prisma-client-js"
}
datasource db {
    provider = "mongodb"
    url      = env("DATABASE_URL")
}
model User {
    id String @id @default(auto()) @map("_id") @db.ObjectId
    name String?
    email String @unique
    image String?
    phone String?
    address String?
    profileComplete Boolean @default(false)
    isAdmin Boolean @default(false)
    bookedVisits Json[]
    favResidenciesID String[] @db.ObjectId
  
    ownedResidencies Residency[] @relation("Owner") 
  
    createdAt DateTime? @default(now())
    updatedAt DateTime? @updatedAt
}
model Residency {
    id String @id @default(auto()) @map("_id") @db.ObjectId
    title String
    description String?
    price Int
    currency String @default("USD")
    address String?
    addressDetails Json? // { city, district, neighborhood }
    city String?
    country String?
    image String?
    images String[]
    facilities Json?
    propertyType String @default("sale") // "sale" or "rent"
    category String @default("residential") // residential, commercial, land, building, timeshare, tourist-facility
    
    // Turkish real estate fields
    listingNo String?
    listingDate DateTime?
    area Json? // { gross, net }
    rooms String?
    buildingAge Int?
    floor Int?
    totalFloors Int?
    heating String?
    bathrooms Int?
    kitchen String?
    balcony Boolean?
    elevator Boolean?
    parking String?
    furnished Boolean?
    usageStatus String?
    siteName String?
    dues Int?
    mortgageEligible Boolean?
    deedStatus String?
    
    // Property Features
    interiorFeatures String[] // İç Özellikler
    exteriorFeatures String[] // Dış Özellikler
    
    userEmail String?
    owner User? @relation("Owner",fields: [userEmail],references: [email])
    
    consultantId String? @db.ObjectId
    consultant Consultant? @relation(fields: [consultantId], references: [id])

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

model Consultant {
    id String @id @default(auto()) @map("_id") @db.ObjectId
    name String
    title String
    specialty String
    experience String
    languages String[]
    rating Float @default(5.0)
    reviews Int @default(0)
    deals Int @default(0)
    phone String
    whatsapp String
    email String @unique
    linkedin String?
    image String
    bio String
    available Boolean @default(true)
    
    residencies Residency[]

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

model ContactMessage {
    id String @id @default(auto()) @map("_id") @db.ObjectId
    name String
    email String
    phone String?
    subject String?
    message String
    propertyId String?
    propertyTitle String?
    read Boolean @default(false)
    
    createdAt DateTime @default(now())
}